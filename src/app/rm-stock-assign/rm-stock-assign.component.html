<div class="animated slideInLeft">
  <mat-card class="mb-20">
    <mat-card-content>
      <mat-card-title>
        {{ title | uppercase }}
        <i color="warn" [ngClass]="{ 'fa fa-cog fa-spin': loadingData }"></i>
      </mat-card-title>

      <!-- Header Section with Date Pickers and Supervisor -->
      <section class="header-section">
        <div class="row">
          <div class="col">
            <mat-form-field class="example-full-width">
              <input matInput
                     [min]="minDate"
                     [max]="maxDate"
                     [matDatepicker]="picker0"
                     [(ngModel)]="startDate"
                     placeholder="Choose a start date"
                     readonly />
              <mat-datepicker-toggle matSuffix [for]="picker0"></mat-datepicker-toggle>
              <mat-datepicker #picker0></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field class="example-full-width">
              <input matInput
                     [min]="minDate"
                     [max]="maxDate"
                     [matDatepicker]="picker1"
                     [(ngModel)]="endDate"
                     placeholder="Choose an end date"
                     readonly />
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field class="example-full-width">
              <mat-label>Select Supervisor</mat-label>
              <mat-select [(value)]="selectedSupervisor">
                <mat-option *ngFor="let supervisor of Supervisors" [value]="supervisor.id">
                  {{ supervisor.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </section>

      <!-- Brands with Quantity and Assign Stock Button -->
      <section class="product-section mt-20" *ngIf="!assignedProducts.length">
        <div class="product-list">
          <div *ngFor="let product of Products" class="product-item">
            <span class="product-name">{{ product.title }}</span>
            <mat-form-field class="example-full-width product-input">
              <input matInput type="number" [(ngModel)]="product.quantity" min="0" />
            </mat-form-field>
          </div>
        </div>

        <div class="button-section mt-20">
          <button mat-raised-button color="primary" (click)="assignStock()">
            Assign Stock
          </button>
        </div>
      </section>

      <!-- Display Assigned Stock Details -->
      <div class="assigned-stock-section mt-20" *ngIf="assignedProducts.length">
        <h3>Assigned Stock Details</h3>
        <div class="product-list">
          <div *ngFor="let product of assignedProducts" class="product-item">
            <span class="product-name">{{ product.title }}</span>
            <mat-form-field class="example-full-width product-input">
              <input matInput 
                     type="number" 
                     [(ngModel)]="product.quantity" 
                     (ngModelChange)="onQuantityChange(product)" 
                     min="0" />
            </mat-form-field>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
